(this["webpackJsonpmusic-box"]=this["webpackJsonpmusic-box"]||[]).push([[0],[,,,function(e,t,n){e.exports=n.p+"static/media/rewind.0475bf17.svg"},,,,function(e,t,n){e.exports=n.p+"static/media/soundcloud.fa27dd99.svg"},function(e,t,n){e.exports=n.p+"static/media/sun_moon.cbec9163.svg"},function(e,t,n){e.exports=n.p+"static/media/github2.9407832c.svg"},function(e,t,n){e.exports=n.p+"static/media/music_finder.3ce52b7d.svg"},function(e,t,n){e.exports=n.p+"static/media/play.aef9a910.svg"},function(e,t,n){e.exports=n.p+"static/media/pause.5b003f17.svg"},function(e,t,n){e.exports=n.p+"static/media/default_artwork.a0cb384e.png"},function(e,t,n){e.exports=n(39)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(6),o=n.n(r),l=(n(19),n(1)),s=(n(20),n(7)),i=n.n(s),u=n(8),m=n.n(u),g=(n(21),function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],o=n[1],s=function(){r?document.getElementById("root").classList.replace("theme-dark","theme-light"):document.getElementById("root").classList.replace("theme-light","theme-dark"),o(!r),localStorage.setItem("DarkMode",!r)};Object(a.useEffect)((function(){!0===JSON.parse(localStorage.getItem("DarkMode"))&&s()}),[]);var i=e.text?c.a.createElement("span",{className:"ToggleThemeText"},e.text):null;return c.a.createElement("div",{className:"ToggleContainer"},c.a.createElement("input",{className:"CheckToggle",id:"toggleTheme",type:"checkbox",onChange:s}),c.a.createElement("label",{className:"ToggleTheme",htmlFor:"toggleTheme"},c.a.createElement("img",{className:"ToggleThemeIcon",src:m.a,alt:"Switch Theme"}),i))}),d=n(9),f=n.n(d),p=function(e){return c.a.createElement("ul",{className:e.desktopOnly?"NavItems DesktopOnly":"NavItems"},c.a.createElement("li",{className:"NavItem"},c.a.createElement(g,{text:"Toggle Theme"})),c.a.createElement("li",{className:"NavItem"},c.a.createElement("a",{className:"NavItemLink",href:"https://soundcloud.com"},c.a.createElement("img",{className:"NavItemImg",src:i.a,alt:"Sound Cloud"}),c.a.createElement("span",{className:"NavItemText"},"Soundcloud"))),c.a.createElement("li",{className:"NavItem"},c.a.createElement("a",{className:"NavItemLink",href:"https://github.com/"},c.a.createElement("img",{className:"NavItemImg",src:f.a,alt:"GitHub"}),c.a.createElement("span",{className:"NavItemText"},"GitHub"))))},E=(n(22),function(e){return c.a.createElement("div",{className:"NavTitle"},c.a.createElement("h1",{className:"TitleText"},e.title))}),v=(n(23),function(e){return c.a.createElement("div",{className:"DrawerToggle"},c.a.createElement("input",{type:"checkbox",id:"drawerToggle",className:"DrawerToggleCheckbox",value:""}),c.a.createElement("label",{onClick:e.toggleDrawer,className:"DrawerToggleLabel",htmlFor:"drawerToggle"},c.a.createElement("span",{className:"DrawerToggleIcon"},"\xa0")))}),S=n(10),h=n.n(S),b=(n(24),function(e){return e.children}),N=function(e){return c.a.createElement(b,null,c.a.createElement("div",{className:"Logo"},c.a.createElement("img",{src:h.a,alt:"Music Finder",className:"LogoImg"})),c.a.createElement("h3",{className:e.desktopOnly?"LogoText DesktopOnly":"LogoText"},"Music Finder"))},y=Object(a.createContext)(),O=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(l.a)(n,2),o=[r[0],r[1]];return c.a.createElement(y.Provider,{value:o},t)},j=(n(25),function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(a.useContext)(y),i=Object(l.a)(s,2),u=(i[0],i[1]);return c.a.createElement("form",{className:"Search",onSubmit:function(t){return function(t){t.preventDefault(),e.submitSearch(r),u(r)}(t)}},c.a.createElement("input",{className:"SearchInput",type:"text",placeholder:"Search music...",onChange:function(e){o(e.target.value)}.bind(void 0)}))}),k=(n(26),function(e){var t=Object(a.useState)("Featured Tracks"),n=Object(l.a)(t,2),r=n[0],o=n[1];return c.a.createElement("div",{className:"Navbar"},c.a.createElement(v,{toggleDrawer:e.toggleDrawer}),c.a.createElement(N,{desktopOnly:!0}),c.a.createElement("div",{className:"SearchTitle"},c.a.createElement(j,{submitSearch:function(e){o("Showing results for: "+e)}}),c.a.createElement(E,{title:r})),c.a.createElement(p,{desktopOnly:!0}))}),x=(n(27),n(28),function(e){return e.show?c.a.createElement("div",{className:"Backdrop",onClick:e.clicked}):null}),w=function(e){var t=["SideDrawer","Closed"];return e.open&&(t=["SideDrawer","Open"]),c.a.createElement("div",null,c.a.createElement(x,{show:e.open,clicked:e.closed}),c.a.createElement("div",{className:t.join(" "),onClick:e.closed},c.a.createElement("div",{className:"LogoSideDrawer"},c.a.createElement(N,null)),c.a.createElement("nav",null,c.a.createElement(p,null))))},T=(n(29),n(4)),C=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n},I=function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw new Error("There has been a problem with the server of soundcloud loading the data. Please refresh the page or perform a new search")}))},P=function(e,t){return Object(T.a)(Object(T.a)({},e),t)},_={songs:[],input:null,nextUrl:null,selectedSong:null,nextSong:null,previousSong:null},D=function(e,t){switch(t.type){case"MAIN_PAGE_LOAD":return P(e,{songs:t.songs});case"SEARCH_SONGS":return P(e,{songs:t.songs,input:t.input,nextUrl:t.nextUrl});case"LOAD_MORE_SONGS":return P(e,{songs:e.songs.concat(t.songs),nextUrl:t.nextUrl});case"SELECT_SONG":console.log("selected song");var n=e.songs.indexOf(t.selectedSong);return P(e,{selectedSong:t.selectedSong,nextSong:e.songs[n+1],previousSong:e.songs[n-1]});default:throw new Error("Action ".concat(t.type," does not exist"))}},L=n(11),A=n.n(L),M=n(12),G=n.n(M),B=(n(30),function(e){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.forEach((function(e){return e&&e.apply(void 0,n)}))}};return e.playIcon?c.a.createElement("img",{className:e.class,src:G.a,alt:"Pause song",onClick:t(e.pauseSong)}):c.a.createElement("img",{className:e.class,src:A.a,alt:"Play song",onClick:t(e.playSong)})}),R=(n(31),function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],o=n[1],s=e.highlightSong,i=e.track;Object(a.useEffect)((function(){e.selectedSong&&e.selectedSong.id===i.id?(s(!0),o(!0)):(s(!1),o(!1))}),[s,e.selectedSong,i]);var u=c.a.createElement(B,{class:"PlayIcon",playSong:e.playSong,pauseSong:e.pauseSong,playIcon:r&&e.isPlaying});return c.a.createElement("div",{className:"SongMedia"},c.a.createElement("div",{className:"SongTitleMedia"},i.title),c.a.createElement("div",{className:"SongArtistMedia"},i.user.username),c.a.createElement("div",{className:"SongControls"},c.a.createElement("div",{className:"SongPlay"},u),c.a.createElement("div",{className:"SongDuration"},C(i.duration)),c.a.createElement("div",{className:"SongGenre"},i.genre)))}),U=n(2),F=n(13),H=n.n(F),J=function(e){var t=Object(a.useRef)(),n=null;(n=(n=e.track.artwork_url?e.track.artwork_url:e.track.user.avatar_url).replace("-large","-t500x500")).includes("default_avatar_large.png")&&(n=H.a);return c.a.createElement("div",{ref:t,className:"Song"},c.a.createElement(R,{track:e.track,highlightSong:function(e){return function(e){if(e)return U.b.to(t.current,{outline:"5px double rgba(249, 105, 0, 0.3)",boxShadow:"0 15px 15px rgba(0, 0, 0, 0.6)",scale:"0.9",force3D:!1,duration:.2});U.b.to(t.current,{outline:"none",boxShadow:"none",scale:"1",duration:.2})}(e)},playSong:function(){e.playSong(e.track)},pauseSong:e.pauseSong,selectedSong:e.selectedSong,isPlaying:e.isPlaying}),c.a.createElement("img",{className:"SongImage",src:n,alt:"Not found"}))},W=(n(32),function(){return c.a.createElement("div",{className:"Loader"},"Loading...")}),V=(n(33),n(3)),q=n.n(V),X=(n(34),"?client_id=1512fb9cbe8228095fe92c6503e3a071"),$=(n(35),function(e){var t=e.songDuration,n=e.currentTime,a=e.onProgressBarChange,r=c.a.useState(),o=Object(l.a)(r,2),s=o[0],i=o[1];return c.a.useEffect((function(){i((1e3*n*100/t).toFixed(2))}),[n,t]),c.a.createElement("div",{className:"ProgressBar",onClick:function(e){return function(e){var n=e.clientX*(t/1e3)/e.target.offsetWidth;a(n)}(e)}},c.a.createElement("div",{className:"TimeBar",style:{width:s+"%"}}))}),z=(n(36),function(e){var t=e.currentTime,n=e.songDuration;return c.a.createElement("div",{className:"PlayerDuration"},C(1e3*t)+" / "+C(n))}),K=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(new Audio),r=Object(l.a)(n,1)[0],o=Object(a.useState)(null),s=Object(l.a)(o,2),i=s[0],u=s[1],m=Object(a.useState)(null),g=Object(l.a)(m,2),d=g[0],f=g[1],p=Object(a.useState)(.15),E=Object(l.a)(p,2),v=E[0],S=E[1];U.a.to(t.current,{y:0,duration:3}),r.onended=function(){e.playSong(e.nextSong)},Object(a.useEffect)((function(){r.volume=v}),[v]),Object(a.useEffect)((function(){e.isPlaying?u(setInterval((function(){f(r.currentTime)}),200)):clearInterval(i)}),[e.isPlaying]),Object(a.useEffect)((function(){var t=!r.paused||r.ended;r.src=e.selectedSong.stream_url+X,r.load(),t&&r.play()}),[e.selectedSong]),Object(a.useEffect)((function(){e.isPlaying?r.play():r.pause()}),[e.isPlaying]);var h=c.a.useCallback((function(e){r.currentTime=e}),[]),b=c.a.createElement(B,{class:"PlayerIcon",playSong:function(){return e.playSong(null)},pauseSong:e.pauseSong,playIcon:e.isPlaying});return c.a.createElement("div",{className:"Player",ref:t},c.a.createElement($,{songDuration:e.selectedSong.duration,currentTime:d,darkmode:e.darkmode,onProgressBarChange:h}),c.a.createElement("div",{className:"PlayerControls"},c.a.createElement("div",{className:"PlayerPlay"},c.a.createElement("img",{className:"PreviousIcon",src:q.a,alt:"Previous song",onClick:function(){return e.playSong(e.previousSong)}}),b,c.a.createElement("img",{className:"NextIcon",src:q.a,alt:"Next song",onClick:function(){return e.playSong(e.nextSong)}})),c.a.createElement("div",{className:"SongData"},c.a.createElement("div",{className:"SongTitle"},e.selectedSong.title),c.a.createElement("div",{className:"SongArtist"},e.selectedSong.user.username)),c.a.createElement(z,{currentTime:d,songDuration:e.selectedSong.duration}),c.a.createElement("div",{className:"PlayerVolume"},c.a.createElement("input",{className:"VolumeBar",type:"range",step:"1",min:"1",max:"100",value:100*v,onChange:function(e){return S(e.target.value/100)}}))))},Q=function(e){var t=e.handleError,n=Object(a.useState)(!1),r=Object(l.a)(n,2),o=r[0],s=r[1],i=Object(a.useState)(!1),u=Object(l.a)(i,2),m=u[0],g=u[1],d=Object(a.useState)(!1),f=Object(l.a)(d,2),p=f[0],E=f[1],v=Object(a.useContext)(y),S=Object(l.a)(v,1)[0],h=function(){var e=Object(a.useReducer)(D,_),t=Object(l.a)(e,2),n=t[0],c=t[1];return[n.songs,n.nextUrl,n.selectedSong,n.nextSong,n.previousSong,c]}(),b=Object(l.a)(h,6),N=b[0],O=b[1],j=b[2],k=b[3],x=b[4],w=b[5],T=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}(N),C=Object(a.useRef)([]),P=c.a.useCallback((function(e){e&&e.id!==(null===j||void 0===j?void 0:j.id)&&w({type:"SELECT_SONG",selectedSong:e}),E(!0)}),[j,w]),L=c.a.useCallback((function(){E(!1)}),[]);Object(a.useEffect)((function(){return I("http://api.soundcloud.com/tracks?client_id=1512fb9cbe8228095fe92c6503e3a071&limit=20&offset=0&linked_partitioning=1&app_locale=en").then((function(e){w({type:"MAIN_PAGE_LOAD",songs:e.collection})})).catch((function(e){return t()})),window.addEventListener("scroll",function(e,t){var n;return function(){var a=arguments,c=this;clearTimeout(n),n=setTimeout((function(){e.apply(c,a)}),t)}}(A,500)),g(!0),function(){return window.removeEventListener("scroll",A)}}),[]),Object(a.useEffect)((function(){return null!==S&&I("http://api.soundcloud.com/tracks?client_id=1512fb9cbe8228095fe92c6503e3a071&limit=20&linked_partitioning=1&q="+S).then((function(e){w({type:"SEARCH_SONGS",songs:e.collection,input:S,nextUrl:e.next_href})})).catch((function(e){return t()})),function(){return w({type:"SEARCH_SONGS",songs:[],input:null,nextUrl:null})}}),[S,w,t]),Object(a.useEffect)((function(){o&&null!==S&&I(O).then((function(e){return w({type:"LOAD_MORE_SONGS",songs:e.collection,nextUrl:e.next_href})})).catch((function(e){return t()}))}),[S,o,w]),Object(a.useLayoutEffect)((function(){(null===N||void 0===N?void 0:N.length)>0&&setTimeout((function(){N.filter((function(e,t){return N[t]!==T[t]})).forEach((function(e,t){U.b.to(C.current[t+T.length],{duration:1,opacity:1,delay:t/3})}))}),500)}),[N]);var A=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight;s(e/t>.85)},M=j?c.a.createElement(K,{isPlaying:p,selectedSong:j,nextSong:k,previousSong:x,playSong:P,pauseSong:L}):null,G=null;return G=m?c.a.createElement(W,null):null,c.a.createElement("div",{className:"SongList"},c.a.createElement("div",{className:"SongCollection"},(null===N||void 0===N?void 0:N.length)?N.map((function(e,t){return c.a.createElement("div",{key:e.id,className:"Card",ref:function(e){return C.current[t]=e}},c.a.createElement(J,{playSong:P,pauseSong:L,track:e,selectedSong:j,isPlaying:p}))})):G),M)},Y=(n(37),function(e){return c.a.createElement(b,null,c.a.createElement(x,{show:e.show,clicked:e.modalClosed}),c.a.createElement("div",{className:"Modal",style:{transform:e.show?"translate(-50%, 0)":"translate(-50%, -200vh)",opacity:e.show?"1":"0"}},e.children))}),Z=(n(38),function(e){return c.a.createElement("button",{onClick:e.clicked,className:["Button",[e.btnType]].join(" ")},e.children)}),ee=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(!1),i=Object(l.a)(s,2),u=i[0],m=i[1],g=c.a.createElement("div",null,c.a.createElement("h1",null,"There has been a problem with the server connection. Please try reloading the page or perform a new search."),c.a.createElement(Z,{btnType:"Primary",clicked:function(){return window.location.reload(!1)}},"Reload Page"));return c.a.createElement("div",{className:"App"},c.a.createElement(Y,{show:u,modalClosed:function(){return e.onErrorMessageClosed()}},g),c.a.createElement(k,{toggleDrawer:function(){o((function(e){return!e}))}}),c.a.createElement(w,{open:r,closed:function(){o(!1)}}),c.a.createElement(Q,{handleError:function(){m(!0)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null,c.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.6b0b1d50.chunk.js.map